<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This module provides traits for calling rust functions dynamically. All functions which implement the DynamicFunction trait can be called by passing an array of [`Any`]s to it. The return value is again of type [`Any`]."><meta name="keywords" content="rust, rustlang, rust-lang, dynamic_function"><title>tlspuffin::term::dynamic_function - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../ayu.css" disabled ><script id="default-settings"></script><script src="../../../storage.js"></script><script src="../../../crates.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../../tlspuffin/index.html'><div class='logo-container rust-logo'><img src='../../../rust-logo.png' alt='logo'></div></a><p class="location">Module dynamic_function</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li></ul></div><p class="location"><a href="../../index.html">tlspuffin</a>::<wbr><a href="../index.html">term</a></p><div id="sidebar-vars" data-name="dynamic_function" data-ty="mod" data-relpath="../"></div><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../../../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../../../settings.html"><img src="../../../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../../index.html">tlspuffin</a>::<wbr><a href="../index.html">term</a>::<wbr><a class="mod" href="">dynamic_function</a><button id="copy-path" onclick="copy_path(this)">⎘</button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../../src/tlspuffin/term/dynamic_function.rs.html#1-329" title="goto source code">[src]</a></span></h1><div class="docblock"><p>This module provides traits for calling rust functions dynamically.
All functions which implement the DynamicFunction trait can be called by passing an array of
<a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="Any"><code>Any</code></a>s to it. The return value is again of type <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="Any"><code>Any</code></a>.</p>
<p>Rust is a statically typed language. That means the compiler would be able to statically verify
that a term evaluates without any type errors.</p>
<p>While this is generally an advance, in the case of our fuzzer this is not very helpful.
The fuzzer should be able to mutate the term trees arbitrarily. Of course, we also have
to check for the types during runtime. If types are not compatible then, the evaluation
of the term will fail. But this is not something that can be done during compile time.
Therefore, we introduced a trait for dynamically typed functions on top of statically
typed Rust functions.</p>
<p>Each function which implements the following trait can be made into a dynamic function:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">tlspuffin::tls::error::FnError</span>;
<span class="kw">type</span> <span class="ident">ConcreteFunction</span><span class="op">&lt;</span><span class="ident">A1</span>, <span class="ident">A2</span>, <span class="ident">A3</span>, <span class="ident">R</span><span class="op">&gt;</span> <span class="op">=</span> <span class="kw">dyn</span> <span class="ident">Fn</span>(<span class="ident">A1</span>, <span class="ident">A2</span>, <span class="ident">A3</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">R</span>, <span class="ident">FnError</span><span class="op">&gt;</span>;</pre></div>
<p>where <code>A1</code>, <code>A2</code>, <code>A3</code> are argument types and <code>R</code> is the return type. From these statically
typed function we can generate dynamically types ones which implement the following trait:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">tlspuffin::tls::error::FnError</span>;
<span class="kw">use</span> <span class="ident">std::any::Any</span>;

<span class="kw">pub</span> <span class="kw">trait</span> <span class="ident">DynamicFunction</span>: <span class="ident">Fn</span>(<span class="kw-2">&amp;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="kw">dyn</span> <span class="ident">Any</span><span class="op">&gt;</span><span class="op">&gt;</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="kw">dyn</span> <span class="ident">Any</span><span class="op">&gt;</span>, <span class="ident">FnError</span><span class="op">&gt;</span> {
}</pre></div>
<p>Note, that both functions return a <code>Result</code> and therefore can gracefully fail.</p>
<p><code>DynamicFunctions</code> can be called with an array of any type. The result type is also arbitrary.
Rust offers a unique ID for each type. Using this type we can check during runtime whether
types are available. The types of each variable, constant and function are preserved and
stored alongside the <code>DynamicFunction</code>.</p>
<p>The following function is a simple example for a constant:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">rustls::CipherSuite</span>;
<span class="kw">use</span> <span class="ident">tlspuffin::tls::error::FnError</span>;

<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">fn_cipher_suites</span>() <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">CipherSuite</span><span class="op">&gt;</span>, <span class="ident">FnError</span><span class="op">&gt;</span> {
    <span class="prelude-val">Ok</span>(<span class="macro">vec!</span>[<span class="ident">CipherSuite::TLS13_AES_128_GCM_SHA256</span>])
}</pre></div>
<p>It returns one possibility for the cipher suites which could be sent during a <code>ClientHello</code>.</p>
</div><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<table><tr class="module-item"><td><a class="struct" href="struct.DynamicFunctionShape.html" title="tlspuffin::term::dynamic_function::DynamicFunctionShape struct">DynamicFunctionShape</a></td><td class="docblock-short"><p>Describes the shape of a <a href="trait.DynamicFunction.html" title="DynamicFunction"><code>DynamicFunction</code></a></p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.TypeShape.html" title="tlspuffin::term::dynamic_function::TypeShape struct">TypeShape</a></td><td class="docblock-short"></td></tr></table><h2 id="traits" class="section-header"><a href="#traits">Traits</a></h2>
<table><tr class="module-item"><td><a class="trait" href="trait.DescribableFunction.html" title="tlspuffin::term::dynamic_function::DescribableFunction trait">DescribableFunction</a></td><td class="docblock-short"><p>This trait is implemented for function traits in order to:</p>
</td></tr><tr class="module-item"><td><a class="trait" href="trait.DynamicFunction.html" title="tlspuffin::term::dynamic_function::DynamicFunction trait">DynamicFunction</a></td><td class="docblock-short"><p>Cloneable type for dynamic functions. This trait is automatically implemented for arbitrary
closures and functions of the form: <code>Fn(&amp;Vec&lt;Box&lt;dyn Any&gt;&gt;) -&gt; Box&lt;dyn Any&gt;</code></p>
</td></tr></table><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2>
<table><tr class="module-item"><td><a class="fn" href="fn.make_dynamic.html" title="tlspuffin::term::dynamic_function::make_dynamic fn">make_dynamic</a></td><td class="docblock-short"></td></tr></table></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="tlspuffin" data-search-index-js="../../../search-index.js" data-search-js="../../../search.js"></div>
    <script src="../../../main.js"></script></body></html>